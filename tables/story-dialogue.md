# StoryPerformData.json

本节是对于MainStoryData.xlsx表中StoryPerformData.json文件中，较为复杂字段的解释。

## nodeType 节点类型

本字段为枚举值，用于标识节点的类型，不同的节点类型会有不同的行为。

详细内容请参考 [节点类型](../system/types-of-dialogue-node)。

## nodeOptions 节点选项

本字段为节点的配置项，不同的节点类型会有不同的配置项，并且对于每一个有内容的配置项都有缩写形式和完整形式。

详细内容请参考 [节点类型](../system/types-of-dialogue-node)。

## tachieEnterType 角色进场类型

本字段为枚举值，用于标识角色的进场方式。\
可接受的值为 `direct` 和 `fade`。

## tachiePosition 角色位置

本字段用于设置角色的位置，格式为： `[数字, 数字]`，第一个数字表示角色的横向位置，第二个数字表示角色的纵向位置，例如：
```text
[0.2, 0.5]
```

> **定位数字的含义**
> - 对于横向位置，0表示立绘将会靠着左边界放置，1表示立绘将会靠着右边界放置。
> - 对于纵向位置，0表示立绘将会靠着上边界放置，1表示立绘将会靠着下边界放置。
> - 对于介于0和1之间的数字，表示立绘将会在两个边界按照线性比例进行放置。例如，0.5表示立绘将会在横向或纵向的中间位置。
> - 但是定位数字并不仅限于0到1之间，可以使用负数或大于1的值，例如-1或者2，表示立绘将会超出边界。
 
## tachieStatus 立绘状态

设定立绘的状态，若不指定会使用默认状态，相当于直接调用 [行级脚本 SetSprite](../scripts/line-scripts-character#setsprite-设置立绘)

对于单图层的角色，设置方式为：
```text
smile
smile, l=0
smile, layer=0
```

对于多图层的角色，设置方式为：
```text
smile, l=0 || smile_1, l=1
```

## dialogueText 对话文本

本字段支持富文本，可以使用 [富文本](../commonly-used/rich-text) 对文本进行修饰。

## characterTempId 角色模板

本字段用于设置角色的模板，用于在系统中使用对应的模板进行创建角色。\
本字段请务必使用表格中的枚举值，不要使用其他值，否则无法正确创建角色。

## characterCode 角色代码
本字段大部分情况下可以忽略，默认会使用与角色模板 `characterTempId` 对应的内置值，只有需要使用同一个角色模板创建多个角色时才需要使用，用于区分同一角色模板的不同角色。

例如：
- 多个卫兵角色，但是他们的对话内容不同，会有多个卫兵同时在场，可以使用同一个卫兵模板，但是角色代码不同。
- 重要角色与他的分身或者幻影对话，可以使用同一个角色模板，但是角色代码不同。

使用示例：

| characterTempId | characterCode | dialogText  |
|-----------------|---------------|-------------|
| guardian        | guardian_1    | 刚才是什么东西跑过去了 |
| guardian        | guardian_2    | 不知道         |
| guardian        | guardian_3    | 我也没看清       |

这样的对话将会将会在游戏中同时出现三个使用同一个立绘的卫兵，分别说出不同的对话。

## commandsOnStart 起始执行脚本

本字段用于设置在对话开始时需要执行的脚本，用于在对话开始时进行一些特殊操作。填写格式请参考 [行级脚本](../scripts/line-scripts) 。

